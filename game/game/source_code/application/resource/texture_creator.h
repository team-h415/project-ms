//================================================================================
// テクスチャクリエーター処理 [TextureCreator.cpp]
// Author : TAKESI IWASAWA
//================================================================================

//================================================================================
// インクルードガード
//================================================================================
#ifndef _TEXTURE_CREATOR_H_
#define _TEXTURE_CREATOR_H_

//================================================================================
// インクルードファイル
//================================================================================
#include "../render/directx9/directx9.h"

//================================================================================
// クラス定義
//================================================================================
class TextureCreator
{
	public:
		//================================================================================
		// コンストラクタ
		// 戻り値 : なし
		// 引数1 : なし
		//================================================================================
		TextureCreator(void);

		//================================================================================
		// デストラクタ
		// 戻り値 : なし
		// 引数1 : なし
		//================================================================================
		~TextureCreator(void);

		//================================================================================
		// セットアップ
		// 戻り値 : なし
		// 引数1 : 横幅
		// 引数2 : 縦幅
		// 引数3 : クリアカラー（デフォルト白
		//================================================================================
		bool Setup(const unsigned int& w, const unsigned int& h, const D3DXCOLOR& setColor = D3DXCOLOR(1.0f, 1.0f, 1.0f, 1.0f));

		//================================================================================
		// テクスチャへのレンダリング開始
		// 戻り値 : なし
		// 引数1 : 横幅
		//================================================================================
		void StartRendering(void);

		//================================================================================
		// テクスチャへのレンダリング終了
		// 戻り値 : なし
		// 引数1 : 横幅
		//================================================================================
		void EndRendering(void);

		//================================================================================
		// テクスチャポインタ取得
		// 戻り値 : テクスチャポインタ
		// 引数1 : なし
		//================================================================================
		IDirect3DTexture9* GetTexture(void){ return tex_; }

	private:
		//================================================================================
		// リリース
		// 戻り値 : なし
		// 引数1 : なし
		//================================================================================
		void Release(void);

		//================================================================================
		// 変数宣言
		//================================================================================
		IDirect3DTexture9*			tex_;				// テクスチャポインタ
		float						size_w_, size_h_;	// テクスチャサイズ

		IDirect3DSurface9*			dev_depth_;			// デバイス深度バッファ
		IDirect3DSurface9*			my_depth_;			// マイ深度バッファ

		IDirect3DSurface9*			dev_buff_suff_;		// デバイスサーフェス
		IDirect3DSurface9*			tex_buff_suff_;		// シャドーマップテクスチャサーフェス

		D3DVIEWPORT9				viewport_;			// 画面サイズなど
		D3DVIEWPORT9				dev_viewport_;		// デバイスのビューポート

		D3DXCOLOR					clear_color_;			// クリアカラー
};

#endif